<!DOCTYPE html>
<html lang="zh">
    <head>
        <script src="https://unpkg.com/vue/dist/vue.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="moqunzhu">

        <title>Detail</title>
        <!-- Custom styles -->
        <link href="../../css/weui-custom-style.css" rel="stylesheet">

        <!-- WeUI styles -->
        <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/1.1.0/weui.min.css">

        <!-- WeUI Javascript library -->
        <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
      
</head>

<body>
    <div id="detail-container">

    <!-- Header -->
    <h1 class="detail-title">{{ item.title }}<span class="weui-cells__title">|&nbsp&nbsp{{ item.course_name }}</span></h1>

    <!-- news list -->
    <div class="news-container">
        <div class="weui-panel weui-panel_access">
        <div class="weui-panel__bd">

            <div class="weui-media-box weui-media-box_text">
                <h5 class="weui-media-box__title">截止时间: {{item.end_time}}</h5>
                <div class="weui-media-box__desc" id="detail-description">作业描述: {{item.detail}}
                </div>
           
            
                <ul class="weui-media-box__info">
                        <li class="weui-media-box__info__meta">发布时间: {{item.start_time}}</li>
                        <li class="weui-media-box__info__meta weui-media-box__info__meta_extra">
                        <span v-if="item.attachment">有附件: {{item.attachment}}</span><span v-else>无附件</span></li>
                    </ul>
            </div>
        </div>
        </div>
        <a href="javascript:;" class="weui-btn weui-btn_primary" id="detail-return-button">返回作业新鲜事</a>
    </div>
    </div>

    <script>
    today =  new Date()
    function expand(items){
        items.forEach(function(i){
            i.days_left = Math.floor((parseDate(i.end_time) - today) / 86400 / 1000)
        })
    }
    function parseDate(str){
        return new Date(str);
    }
    $.getJSON('/api/hw/detail/?homework_id=?student_id=2014013432&token=foo',function(data){
        expand(data.data);
        data.data.sort(function(a, b){
            return parseDate(a.end_time) > parseDate(b.end_time)
        })
        new Vue({
            el: '#detail-container',
            data: {
                'item': data.data[0]
            }
        })
    })
    </script>




</body>

